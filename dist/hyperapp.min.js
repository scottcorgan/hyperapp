var hyperapp=function(){"use strict";function e(e){return function(t,n,r){for(var o in n)o in a&&(n[a[o]]=n[o],delete n[o]);return e(t,n,r)}}function t(e){return e===v||e===m}function n(e){return A.test(e)}var r=function(e){var t,n=function(e,t){setTimeout(function(n){return e(t)},0)},r=function(e,t){var n,r={};if(o(typeof t)||Array.isArray(t))return t;for(n in e)r[n]=e[n];for(n in t)r[n]=t[n];return r},o=function(e){return"string"===e||"number"===e||"boolean"===e},a=function(e,n,r){s(w,t=n(e,d),r,0)},i=function(e,t){return e.tag!==t.tag||typeof e!=typeof t||o(typeof e)&&e!==t},s=function(e,t,r,o){if(void 0===r)e.appendChild(f(t));else if(void 0===t){for(;o>0&&!e.childNodes[o];)o--;if(o>=0){var a=e.childNodes[o];if(r&&r.data){var u=r.data.onremove;u&&n(u,a)}e.removeChild(a)}}else if(i(t,r))e.replaceChild(f(t),e.childNodes[o]);else if(t.tag){var a=e.childNodes[o];h(a,t.data,r.data);for(var l=t.tree.length,p=r.tree.length,c=0;c<l||c<p;c++)s(a,t.tree[c],r.tree[c],c)}},f=function(e){var t;if(o(typeof e))t=document.createTextNode(e);else{t=e.data&&e.data.ns?document.createElementNS(e.data.ns,e.tag):document.createElement(e.tag);for(var r in e.data)"oncreate"===r?n(e.data[r],t):u(t,r,e.data[r]);for(var a=0;a<e.tree.length;a++)t.appendChild(f(e.tree[a]))}return t},u=function(e,t,n,r){if("style"===t)for(var o in n)e.style[o]=n[o];else if("on"===t.substr(0,2)){var a=t.substr(2);e.removeEventListener(a,r),e.addEventListener(a,n)}else"false"===n||n===!1?(e.removeAttribute(t),e[t]=!1):(e.setAttribute(t,n),e[t]=n)},l=function(e,t,n){e.removeAttribute("className"===t?"class":t),"boolean"!=typeof n&&"true"!==n&&"false"!==n||(e[t]=!1)},h=function(e,t,o){for(var a in r(o,t)){var i=t[a],s=o[a];void 0===i?l(e,a,s):i!==s&&("onupdate"===a?n(i,e):u(e,a,i,s))}},p=function(e){var t=[],n="^"+e.replace(/\//g,"\\/").replace(/:([A-Za-z0-9_]+)/g,function(e,n){return t.push(n),"([A-Za-z0-9_]+)"})+"/?$";return{re:n,keys:t}},c=function(e,t){for(var n in e){var r,o=p(n),a={};if(t.replace(new RegExp(o.re,"g"),function(){for(var t=arguments,i=1;i<arguments.length-2;i++)a[o.keys.shift()]=t[i];r=function(t,r){return e[n](t,r,a)}}),r)return r}return e["/"]},d={},g=e.model,v=e.update||{},m=e.effects||{},y=e.subs||{},b=r({onAction:Function.prototype,onUpdate:Function.prototype,onError:function(e){throw e}},e.hooks),w=e.root||document.body.appendChild(document.createElement("div")),A=e.view||function(e){return w},E="function"==typeof A?void 0:A;E&&(A=c(E,location.pathname),d.setLocation=function(e){a(g,A=c(E,e),t),history.pushState({},"",e)},window.addEventListener("popstate",function(e){a(g,A=c(E,location.pathname),t)}),window.addEventListener("click",function(e){if(!(e.metaKey||e.shiftKey||e.ctrlKey||e.altKey)){for(var t=e.target;t&&"a"!==t.localName;)t=t.parentNode;if(t&&t.host===location.host&&!t.hasAttribute("data-no-routing")){var n=""===t.hash?n:document.querySelector(t.hash);n?n.scrollIntoView(!0):(d.setLocation(t.pathname),e.preventDefault())}}}));var L=function(e){d[e]=function(n){b.onAction(e,n);var o=m[e];if(o)return o(g,d,n,b.onError);var i=v[e],s=g;a(g=r(g,i(g,n)),A,t),b.onUpdate(s,g,n)}};for(var k in r(v,m))L(k);document.addEventListener("DOMContentLoaded",function(e){for(var t in y)y[t](g,d,b.onError)}),a(g,A)},o=e,a={class:"className",for:"htmlFor","http-equiv":"httpEquiv"},i=o,s=0,f=1,u=2,l=3,h=4,p=5,c=6,d=7,g=8,v=9,m=10,y=11,b=12,w=function(e,r){function o(e){return"function"==typeof e?e:"string"==typeof e?e:e&&"object"==typeof e?e:a("",e)}e=i(e),r||(r={});var a=r.concat||function(e,t){return String(e)+String(t)};return function(r){function i(e){var n=[];A===d&&(A=h);for(var r=0;r<e.length;r++){var o=e.charAt(r);A===f&&"<"===o?(E.length&&n.push([f,E]),E="",A=u):">"!==o||t(A)?A===f?E+=o:A===u&&/\s/.test(o)?(n.push([u,E]),E="",A=h):A===u?E+=o:A===h&&/[\w-]/.test(o)?(A=p,E=o):A===h&&/\s/.test(o)?(E.length&&n.push([p,E]),n.push([b])):A===p&&/\s/.test(o)?(n.push([p,E]),E="",A=c):A===p&&"="===o?(n.push([p,E],[y]),E="",A=d):A===p?E+=o:A!==c&&A!==h||"="!==o?A!==c&&A!==h||/\s/.test(o)?A===d&&'"'===o?A=m:A===d&&"'"===o?A=v:A===m&&'"'===o?(n.push([g,E],[b]),E="",A=h):A===v&&"'"===o?(n.push([g,E],[b]),E="",A=h):A!==d||/\s/.test(o)?A===g&&/\s/.test(o)?(n.push([g,E],[b]),E="",A=h):A!==g&&A!==v&&A!==m||(E+=o):(A=g,r--):(n.push([b]),/[\w-]/.test(o)?(E+=o,A=p):A=h):(n.push([y]),A=d):(A===u?n.push([u,E]):A===p?n.push([p,E]):A===g&&E.length&&n.push([g,E]),n.push([l]),E="",A=f)}return A===f&&E.length?(n.push([f,E]),E=""):A===g&&E.length?(n.push([g,E]),E=""):A===m&&E.length?(n.push([g,E]),E=""):A===v&&E.length?(n.push([g,E]),E=""):A===p&&(n.push([p,E]),E=""),n}for(var w=arguments,A=f,E="",L=arguments.length,k=[],N=0;N<r.length;N++)if(N<L-1){var C=w[N+1],F=i(r[N]),S=A;S===m&&(S=g),S===v&&(S=g),S===d&&(S=g),S===h&&(S=p),F.push([s,S,C]),k.push.apply(k,F)}else k.push.apply(k,i(r[N]));for(var x=[null,{},[]],M=[[x,-1]],N=0;N<k.length;N++){var D=M[M.length-1][0],F=k[N],T=F[0];if(T===u&&/^\//.test(F[1])){var K=M[M.length-1][1];M.length>1&&(M.pop(),M[M.length-1][0][2][K]=e(D[0],D[1],D[2].length?D[2]:void 0))}else if(T===u){var R=[F[1],{},[]];D[2].push(R),M.push([R,D[2].length-1])}else if(T===p||T===s&&F[1]===p){for(var j,q="";N<k.length;N++)if(k[N][0]===p)q=a(q,k[N][1]);else{if(k[N][0]!==s||k[N][1]!==p)break;if("object"!=typeof k[N][2]||q)q=a(q,k[N][2]);else for(j in k[N][2])k[N][2].hasOwnProperty(j)&&!D[1][j]&&(D[1][j]=k[N][2][j])}k[N][0]===y&&N++;for(var z=N;N<k.length;N++)if(k[N][0]===g||k[N][0]===p)D[1][q]?D[1][q]=a(D[1][q],k[N][1]):D[1][q]=o(k[N][1]);else{if(k[N][0]!==s||k[N][1]!==g&&k[N][1]!==p){!q.length||D[1][q]||N!==z||k[N][0]!==l&&k[N][0]!==b||(D[1][q]=q.toLowerCase());break}D[1][q]?D[1][q]=a(D[1][q],k[N][2]):D[1][q]=o(k[N][2])}}else if(T===p)D[1][F[1]]=!0;else if(T===s&&F[1]===p)D[1][F[2]]=!0;else if(T===l){if(n(D[0])&&M.length){var K=M[M.length-1][1];M.pop(),M[M.length-1][0][2][K]=e(D[0],D[1],D[2].length?D[2]:void 0)}}else if(T===s&&F[1]===f)void 0===F[2]||null===F[2]?F[2]="":F[2]||(F[2]=a("",F[2])),Array.isArray(F[2][0])?D[2].push.apply(D[2],F[2]):D[2].push(F[2]);else if(T===f)D[2].push(F[1]);else if(T!==y&&T!==b)throw new Error("unhandled: "+T)}if(x[2].length>1&&/^\s*$/.test(x[2][0])&&x[2].shift(),x[2].length>2||2===x[2].length&&/\S/.test(x[2][1]))throw new Error("multiple root elements must be wrapped in an enclosing tag");return Array.isArray(x[2][0])&&"string"==typeof x[2][0][0]&&Array.isArray(x[2][0][2])&&(x[2][0]=e(x[2][0][0],x[2][0][1],x[2][0][2])),x[2][0]}},A=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9-ï¿¿_:-]+)*$"),E=function(e,t,n){t.ns="http://www.w3.org/2000/svg",n.forEach(function(e){e.data&&E(e.tag,e.data,e.tree)})},L=function(e,t,n){return"svg"===e&&E(e,t,n),{tag:e,data:t||{},tree:[].concat.apply([],n)}},k=w(L),N={app:r,html:k,h:L};return N}();
